# Повышаем безопасность и конфиденциальность данных в компьютерах Mac и системе macOS

Сборник советов по обеспечению безопасности современных компьютеров Mac от Apple на базе операционной системы macOS (ранее OS X) 10.12 "Sierra".
А также шаги по повышению конфиденциальности в интернете.

Этот гид предназначен для опытных пользователей, желающих следовать копоративным стандартам безопасности. Но данное руководство подходит и для начинающих пользователей заинтересованных в улучшении их конфиденциальности и безопасности при работе на Mac.

Система будет безопасна настолько, насколько ее администраторы способны это сделать. И это не какая-то единственная техноголия, программное обеспечение или особенная техника, которая гарантирует превосходную безопасность компьютера. Современный компьютер и операционная система очень сложны и требуют многочисленных последовательных шагов для значительного улучшения безопасности и кофиденциальности.

Автор **не несет** ответственности если какой-то из пунктов приведет к выходу из строя вашего Mac.
***
**Мастерская [macMachine](https://www.macmachine.ru) всегда готова помочь в проблеме с Mac :-) Прим. переводчика**

## Содержание
Если у вас есть замечание или улучшение одного из пунктов руководства, то напишите об этом в комментарии.

- [Основы](#Основы)
- Прошивка
- Подготовка и установка macOS
  - Виртуализация
- Первый запуск
- Администратор и базовый аккаунты пользователя
- Полное шифрование диска
- Брэндмауэр (Firewall)
  - Брэндмауэр на уровне приложений
  - Брендмауэр для тертьего лица
  - Фильтрация пакетов на уровне ядра
- Службы
- Советы по Spotlight
- Homebrew (менеджер недостающих пакетов для macOS)
- DNS
  - hosts-файл
  - Dnsmasq
    - тест проверки DNSSEC
  - DNSCrypt
- Captive portal
- Сертификация ключей
- OpenSSL
- Curl
- Web
  - Privoxy
  - Браузер
    - Google Chrome
    - Firefox
    - Safari
    - Браузеры и конфиденциальность
  - Плагины
- PGP/GPG
- OTR
- Tor
- VPN
- Вирусы и вредоносные программы
- Система защиты целостности
- Gatekeeper и XProtect
- Пароли
- Резервные копии
- WI-FI
- SSH
- Физический доступ
- Мониторинг системы
  - OpenBSM аудит
  - DTrace
  - Исполнение
  - Сеть
- Белые бинарные списки
- Разное
- Взаимосвязанное програмное обеспечение
- Дополнительные ресурсы
***
## Основы
Стандартные реккомендации по безопасности:
- **Определите источник угроз**
  - Что пытаетесь защитить и от кого? Ваш неприятель именуется из [трех букв](https://theintercept.com/document/2015/03/10/strawhorse-attacking-macos-ios-software-development-kit/) (если так, то можете рассмотреть использование [OpenBSD](http://www.openbsd.org/)), является сторонним сетевым наблюдателем или представляет [постоянную угрозу](https://en.wikipedia.org/wiki/Advanced_persistent_threat) для вас?
  - Изучайте, [распознавайте угрозы](https://www.usenix.org/system/files/1401_08-12_mickens.pdf), а также уменьшайте количество уязвимых мест для них.
- **Установите новейшие обновления**
  - Установите новейшие обновления для операционной системы и програмного обеспечения
  - Обновление `macOS` могут быть установлены через приложение AppStore. Можно установить обновления через командную строку - введите команду `softwareupdate`. В обоих случаях создавать аккаунт не требуется.
  - Подпишитесь на рассылку новостей от програмного обеспечения, которое часто используете. Например, [Apple security-announce](https://lists.apple.com/mailman/listinfo/security-announce).
- **Зашифруйте конфиденциальный данные**
  - В дополнению к общему шифрованию данных на диске, создайте один или несколько зашифрованных контейнеров для хранения ключей, паролей, документов и других данных. Это позволит снизить ущерб в случае компрометации данных или их утечки.
- **Периодически делайте резервные копии системы**
  - Регулярно создавайте резервные копии данных и будьте готовы восстановить систему после компрометации данных.
  - Всегда шифруйте резервные копии перед копированием их на носитель или облачный сервис.
  - Проверяйте работоспособность резервных копий. Например, через доступ к некоторым файлам.
- **Не запускайте сомнительные программы**
  - В конце концов, безопасность системы может быть снижена его администратором.
  - Устанавливайте новое и незнакомое программное обеспечение с осторожностью. Это относится также к бесплатным и "open-source" программам.
  
## Прошивка

Установка пароля прошивки предотвращает запуск вашего Mac с любого другого устройства кроме загрузочного диска. Он также может быть необходим при каждом запуске.

Эта возможность может быть полезна если ваш компьютер потерян или украден, защиты против непосредственного доступа к памяти (DIrect Memory Access), которая может прочитать ваш пароль FileVault и ввода изменений в ядро модулей, таких как [pcileech](https://github.com/ufrisk/pcileech), как единственного способа сбросить пароль прошивки через Apple Store или с помощью SPI-программатора, таких как [Bus Pirate](http://ho.ax/posts/2012/06/unbricking-a-macbook/) или другой IC-флэш программатор.

1. Запустите компьютер удерживая `Command + R` для входа в режим восстановления ([Recovery Mode](https://support.apple.com/en-au/HT201314))
2. Когда появится окно восстановления, выбираем **Firmware Password Utility** из меню Utilities.
3. В окне **Firmware Utility** выбираем пункт **Turn On Firmware Password**.
4. Вводим пароль. Затем вводим пароль повторно, подтверждая его.
5. Выбираем **Set Password**.
6. Выбираем **Quit Firmware Utility**, чтобы закрыть Firmware Password Utility.
7. Переходим в меню Apple и выбираем **Restart or Shutdown**.

Пароль прошивки активируется при следующем запуске. Для подтверждения пароля, удерживайте `Alt` во время запуска - вам будет предложено ввести пароль.

Управлять паролем прошивки можно через утилиту `firmwarepasswd` из загруженной операционной системы. Например, для запроса прошивки при попытке загрузиться с другого устройства:

```$ sudo firmwarepasswd -setpasswd -setmode command```

Введите пароль и перезапустите Mac.

[Фото](https://cloud.githubusercontent.com/assets/12475110/17075918/0f851c0c-50e7-11e6-904d-0b56cf0080c1.png)

Использование Dediprog SF600 для удаления пароля прошивки. Смотри [HT204455](https://support.apple.com/en-au/HT204455), [LongSoft/UEFITool](https://github.com/LongSoft/UEFITool) и [chipsec/chipsec](https://github.com/chipsec/chipsec) для дополнительной информации.

***
Источник [macOS-Security-and-Privacy-Guide](https://github.com/drduh/macOS-Security-and-Privacy-Guide/blob/master/README.md) (english)

Переведено для [macMachine.ru](https://www.macmachine.ru/blog/povyshaem_bezopasnost_i_konfidencialnost_dannyh_v_kompyuterah_mac_i_sisteme_macos.html)
